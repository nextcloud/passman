<?xml version="1.0" encoding="UTF-8"?>
<database xmlns:xsi= "http://www.w3.org/2001/XMLSchema-instance"
		  xsi:noNamespaceSchemaLocation="https://raw.githubusercontent.com/nextcloud/appstore/master/nextcloudappstore/api/v1/release/database.xsd">
	<name>*dbname*</name>
	<create>true</create>
	<overwrite>false</overwrite>
	<charset>utf8</charset>
	<table>
		<name>*dbprefix*passman_vaults</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>name</name>
				<type>text</type>
				<length>100</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>vault_settings</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>created</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>last_access</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>public_sharing_key</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>private_sharing_key</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>sharing_keys_generated</name>
				<type>integer</type>
				<length>8</length>
			</field>
			<index>
				<name>passman_vault_last_access_index</name>
				<field>
					<name>last_access</name>
				</field>
			</index>

			<index>
				<name>passman_vault_guid_index</name>
				<field>
					<name>guid</name>
				</field>
			</index>

			<index>
				<name>npassman_vault_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>

			<index>
				<name>passman_vault_uid_id_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_credentials</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>

			<field>
				<name>user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>vault_id</name>
				<type>integer</type>
				<length>8</length>
				<notnull>true</notnull>
			</field>

			<field>
				<name>label</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>

			<field>
				<name>description</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>created</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>changed</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>tags</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>email</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>username</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>password</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>url</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>renew_interval</name>
				<type>bigint</type>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>expire_time</name>
				<type>bigint</type>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>delete_time</name>
				<type>bigint</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>files</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>

			<field>
				<name>custom_fields</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>otp</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<field>
				<name>hidden</name>
				<type>boolean</type>
				<default>false</default>
			</field>
			<field>
				<name>shared_key</name>
				<type>clob</type>
			</field>
			<field>
				<name>icon</name>
				<type>clob</type>
			</field>
			<index>
				<name>passman_credential_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>
			<index>
				<name>passman_credential_vault_id_index</name>
				<field>
					<name>vault_id</name>
				</field>
			</index>
			<index>
				<name>passman_credential_user_id_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_files</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>

			<field>
				<name>user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>mimetype</name>
				<type>text</type>
				<length>255</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>filename</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>size</name>
				<type>bigint</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>created</name>
				<type>bigint</type>
				<notnull>true</notnull>
			</field>

			<field>
				<name>file_data</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
			<index>
				<name>passman_file_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>
			<index>
				<name>passman_file_user_id_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_revisions</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>credential_id</name>
				<type>integer</type>
				<length>8</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>created</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>credential_data</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>edited_by</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<index>
				<name>passman_revision_id_index</name>
				<field>
					<name>id</name>
				</field>
			</index>
			<index>
				<name>passman_revision_user_id_index</name>
				<field>
					<name>user_id</name>
				</field>
			</index>
			<index>
				<name>passman_revision_credential_id_index</name>
				<field>
					<name>credential_id</name>
				</field>
			</index>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_sharing_acl</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>item_id</name>
				<type>integer</type>
				<length>8</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>item_guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>vault_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
			</field>
			<field>
				<name>vault_guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>created</name>
				<type>integer</type>
				<length>64</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>expire</name>
				<type>integer</type>
				<length>64</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>expire_views</name>
				<type>integer</type>
				<length>64</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
			<field>
				<name>permissions</name>
				<type>integer</type>
				<length>3</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>shared_key</name>
				<type>clob</type>
				<notnull>false</notnull>
			</field>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_share_request</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>item_id</name>
				<type>integer</type>
				<length>8</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>item_guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>target_user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>from_user_id</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>target_vault_id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
			</field>
			<field>
				<name>target_vault_guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>shared_key</name>
				<type>clob</type>
				<notnull>true</notnull>
			</field>
			<field>
				<name>permissions</name>
				<type>integer</type>
				<length>3</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<default>0</default>
			</field>
			<field>
				<name>created</name>
				<type>integer</type>
				<length>64</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
		</declaration>
	</table>
	<table>
		<name>*dbprefix*passman_delete_vault_request</name>
		<declaration>
			<field>
				<name>id</name>
				<type>integer</type>
				<length>8</length>
				<unsigned>true</unsigned>
				<notnull>true</notnull>
				<autoincrement>true</autoincrement>
				<primary>true</primary>
			</field>
			<field>
				<name>vault_guid</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>reason</name>
				<type>text</type>
				<length>64</length>
				<notnull>true</notnull>
			</field>
			<field>
				<name>requested_by</name>
				<type>text</type>
				<length>64</length>
				<notnull>false</notnull>
			</field>
			<field>
				<name>created</name>
				<type>integer</type>
				<length>64</length>
				<unsigned>true</unsigned>
				<notnull>false</notnull>
				<default>0</default>
			</field>
		</declaration>
	</table>
</database>
